<!DOCTYPE html><html lang="zh-TW"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style-dark.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight-dark.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.4"><title>遇見 Laravel 的午後(Part 11) | 廢言集</title><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">遇見 Laravel 的午後(Part 11)</h1><a id="logo" href="/.">廢言集</a><p class="description">從理想到實現</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首頁</i></a><a href="/archives/"><i class="fa fa-archive"> 所有文章</i></a><a href="/about/"><i class="fa fa-user"> 關於</i></a><a href="/atom.xml"><i class="fa fa-rss"> 訂閱</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">遇見 Laravel 的午後(Part 11)</h1><div class="post-meta"><a href="/2020/07/26/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%2011)/#comments" class="comment-count"></a><p><span class="date">Jul 26, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>點擊</i></i></span></p></div><div class="post-content"><p>在這個章節，要介紹  Query Builder 查詢建構器，Laravel提供資料存取的方法。Laravel提供的資料存取有兩種，一個是 Query Builder，另一個就是 Eloquent ORM，沒有強制規定要用哪一種去做資料的處理。</p>
<h2 id="什麼是-Query-Builder？"><a href="#什麼是-Query-Builder？" class="headerlink" title="什麼是 Query Builder？"></a>什麼是 Query Builder？</h2><p>Query Builder 就是 查詢產生器，以 PDO(PHP Data Objects)為基底處理資料庫CURD機制，為了避免可能的 SQL資料隱碼 (SQL injection) 攻擊。</p>
<h3 id="建立Member的Controller"><a href="#建立Member的Controller" class="headerlink" title="建立Member的Controller"></a>建立Member的Controller</h3><p>這裡如果已經建立過Member的Controller，請直接忽略這步驟。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ php artisan make:controller MemberController</span><br></pre></td></tr></table></figure>

<p>建立好以後，開啟 <code>MemberController.php</code></p>
<p><code>專案 &gt; app &gt; Http &gt; Controllers &gt; MemberController.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在class 裡面我們建立一個 <code>function index</code>，接下來要做CURD的操作。<br>會用到 <code>DB</code> 這個物件，所以我們要記得去引入 <code>use Illuminate\Support\Facades\DB;</code>。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">DB</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        $data = DB::table(<span class="string">'members'</span>)....替換的函數</span><br><span class="line">        dd($data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下來顯示資料的畫面，我們會以 <code>dd($data);</code>，來做顯示。</p>
<hr>
<h3 id="印出或顯示資料結果-dd-、dump"><a href="#印出或顯示資料結果-dd-、dump" class="headerlink" title="印出或顯示資料結果 dd() 、dump()"></a>印出或顯示資料結果 <code>dd()</code> 、<code>dump()</code></h3><p>什麼是dd() and dump()？他是Laravel 內建的一個輔助函數，大部分開發者會拿來做debug使用。把 <code>var_dump</code> 寫成一個 <code>function</code> 後供開發者使用。</p>
<hr>
<h3 id="新增-insert"><a href="#新增-insert" class="headerlink" title="新增 insert()"></a>新增 <code>insert()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;insert([</span><br><span class="line">    <span class="string">'m_account'</span> =&gt; <span class="string">'Ps_0610'</span>, </span><br><span class="line">    <span class="string">'m_password'</span> =&gt; md5(<span class="string">'Ab123456'</span>),</span><br><span class="line">    <span class="string">'m_name'</span> =&gt; <span class="string">'郭小黑'</span>,</span><br><span class="line">    <span class="string">'m_id'</span> =&gt; <span class="string">'M10001'</span>,</span><br><span class="line">    <span class="string">'m_email'</span> =&gt; <span class="string">'ya1233456@hotmail.com'</span>,</span><br><span class="line">    <span class="string">'m_phone'</span> =&gt; <span class="string">'02-23781234'</span>,</span><br><span class="line">    <span class="string">'category'</span> =&gt; <span class="string">'5'</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> members(m_account,m_password,m_name,</span><br><span class="line">                    m_id,m_email,m_phone,<span class="keyword">category</span>)</span><br><span class="line">            <span class="keyword">VALUES</span>(<span class="string">'Ps_0610'</span>, <span class="keyword">md5</span>(<span class="string">'Ab123456'</span>),<span class="string">'郭小黑'</span>,</span><br><span class="line">                    <span class="string">'M10002'</span>,<span class="string">'ya1233456@hotmail.com'</span>,<span class="string">'02-23781234'</span>,<span class="string">'5'</span>);</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="修改-update"><a href="#修改-update" class="headerlink" title="修改 update()"></a>修改 <code>update()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)</span><br><span class="line">            -&gt;where(<span class="string">'m_account'</span>,<span class="string">'='</span>,<span class="string">'Ps_0610'</span>)</span><br><span class="line">            -&gt;update([<span class="string">'m_email'</span> =&gt; <span class="string">'Ad123456792@gmail.com'</span>]);</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> members</span><br><span class="line"><span class="keyword">SET</span> m_email = <span class="string">'Ad123456792@gmail.com'</span></span><br><span class="line"><span class="keyword">WHERE</span> m_account = <span class="string">'Ps_0610'</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="刪除-delete"><a href="#刪除-delete" class="headerlink" title="刪除 delete()"></a>刪除 <code>delete()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)</span><br><span class="line">        -&gt;where(<span class="string">'m_account'</span>,<span class="string">'='</span>,<span class="string">'Ps_0610'</span>)</span><br><span class="line">        -&gt;delete();</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">WHERE</span> m_account = <span class="string">'Ps_0610'</span>;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="顯示資料表的所有內容-GET"><a href="#顯示資料表的所有內容-GET" class="headerlink" title="顯示資料表的所有內容 GET()"></a>顯示資料表的所有內容 <code>GET()</code></h3><p>get() 方法回傳的結果為 <code>Illuminate\Support\Collection</code>，每個結果都是一個 PHP StdClass。<br>Query Builder實例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="資料表篩選條件-WHERE"><a href="#資料表篩選條件-WHERE" class="headerlink" title="資料表篩選條件 WHERE()"></a>資料表篩選條件 <code>WHERE()</code></h3><p>※ 查詢會員姓名為 <code>Odie Tromp</code> 的。<br><code>WHERE(欄位,運算子,值)</code>，第二個參數，運算子為等號時，可以做省略。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'m_name'</span>,<span class="string">'Odie Tromp'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">WHERE</span> m_name=<span class="string">"Odie Tromp"</span>;</span><br></pre></td></tr></table></figure>


<p>※ 查詢會員資料表編號 <strong>大於等於</strong> <code>6</code> 的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'6'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> &gt;=<span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<h3 id="※-查詢會員資料表編號-大於等於-6-且抓取第一筆first-。"><a href="#※-查詢會員資料表編號-大於等於-6-且抓取第一筆first-。" class="headerlink" title="※ 查詢會員資料表編號 大於等於 6 且抓取第一筆first()。"></a>※ 查詢會員資料表編號 <strong>大於等於</strong> <code>6</code> 且<strong>抓取第一筆</strong><code>first()</code>。</h3><p>(回傳單一的stdClass Object)</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'6'</span>)-&gt;get()-&gt;first();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> &gt;=<span class="number">6</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>


<p>※ 計算 會員資料表編號 <strong>大於等於</strong> <code>9</code>的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'9'</span>)-&gt;count();</span><br></pre></td></tr></table></figure>
<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">id</span>) </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">9</span>;</span><br></pre></td></tr></table></figure>

<h3 id="※-查詢-會員資料表編號-等於10，回傳-m-account欄位值-value"><a href="#※-查詢-會員資料表編號-等於10，回傳-m-account欄位值-value" class="headerlink" title="※ 查詢 會員資料表編號 等於10，回傳 m_account欄位值 value()"></a>※ 查詢 會員資料表編號 等於<code>10</code>，回傳 <code>m_account</code>欄位值 <strong><code>value()</code></strong></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'10'</span>)-&gt;value(<span class="string">'m_account'</span>);</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"gchbObOjsv"</span></span><br></pre></td></tr></table></figure>


<h3 id="查詢條件是否存在-exists"><a href="#查詢條件是否存在-exists" class="headerlink" title="查詢條件是否存在 exists()"></a>查詢條件是否存在 <code>exists()</code></h3><p>查詢條件值<strong>不存在</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'11'</span>)-&gt;exists();</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure>

<p>查詢條件值<strong>存在</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'10'</span>)-&gt;exists();</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<h3 id="查詢條件是否存在-相反-doesntExist"><a href="#查詢條件是否存在-相反-doesntExist" class="headerlink" title="查詢條件是否存在(相反) doesntExist()"></a>查詢條件是否存在(相反) <code>doesntExist()</code></h3><p>查詢條件值<strong>不存在</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'11'</span>)-&gt;doesntExist();</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<p>查詢條件值<strong>存在</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;where(<span class="string">'id'</span>,<span class="string">'&gt;='</span>,<span class="string">'10'</span>)-&gt;doesntExist();</span><br></pre></td></tr></table></figure>
<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="查詢指定的欄位-select"><a href="#查詢指定的欄位-select" class="headerlink" title="查詢指定的欄位 select()"></a>查詢指定的欄位 <code>select()</code></h3><p>※ 只列出會員姓名(m_name)的欄位</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_name'</span>)-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同上</span></span><br><span class="line">$data = DB::select(DB::raw(<span class="string">'select m_name FROM members'</span>));</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> m_name</span><br><span class="line"><span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>

<p>※ 只列出會員姓名(m_name)的欄位，且將欄位名改成name。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_name as name'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> m_name <span class="keyword">AS</span> <span class="string">`name`</span></span><br><span class="line"><span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>

<p>※ 只列出會員姓名(m_name)、會員電話(m_phone)、會員電子郵件(m_email)的欄位。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_name'</span>,<span class="string">'m_phone'</span>,<span class="string">'m_email'</span>)-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 結果跟上面一樣</span></span><br><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_name'</span>)</span><br><span class="line">                            -&gt;addSelect(<span class="string">'m_phone'</span>,<span class="string">'m_email'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> m_name,m_phone,m_email</span><br><span class="line"><span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>

<h3 id="特殊情況使用-selectRaw"><a href="#特殊情況使用-selectRaw" class="headerlink" title="特殊情況使用 selectRaw()"></a>特殊情況使用 <code>selectRaw()</code></h3><p><font color="#FF0000"><code>selectRaw()</code> 應盡量少用，雖然是 Laravel 提供的，可是在對於 SQL Injection 防護就少了一層。</font><br>會員類別做群組，並將群組的資料做計算各別總數</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_name'</span>,<span class="string">'m_account'</span>,<span class="string">'m_name'</span>,<span class="string">'category'</span>)</span><br><span class="line">                            -&gt;selectRaw(<span class="string">'count(*) AS category_count'</span>)</span><br><span class="line">                            -&gt;groupBy(<span class="string">'category'</span>)</span><br><span class="line">                            -&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> , m_account , m_name , <span class="keyword">category</span> , <span class="keyword">count</span>(*) <span class="keyword">AS</span> category_count </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="計算資料筆數-COUNT"><a href="#計算資料筆數-COUNT" class="headerlink" title="計算資料筆數 COUNT()"></a>計算資料筆數 <code>COUNT()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;count();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="查詢會員資料表編號的最大值-Max"><a href="#查詢會員資料表編號的最大值-Max" class="headerlink" title="查詢會員資料表編號的最大值 Max( )"></a>查詢會員資料表編號的<strong>最大值</strong> <code>Max( )</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;max(<span class="string">'id'</span>);</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> members;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="關聯資料表-JOIN"><a href="#關聯資料表-JOIN" class="headerlink" title="關聯資料表 JOIN()"></a>關聯資料表 <code>JOIN()</code></h3><p>將 會員資料表的 <code>會員權限(category)</code> 關連到會員類別資料表的 <code>編號(id)</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)</span><br><span class="line">    -&gt;join(<span class="string">'member_categories'</span>,<span class="string">'members.category'</span>,<span class="string">'='</span>,<span class="string">'member_categories.id'</span>)</span><br><span class="line">    -&gt;select(<span class="string">'members.*'</span>,<span class="string">'member_categories.name'</span>)</span><br><span class="line">    -&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> members.*,member_categories.<span class="string">`name`</span></span><br><span class="line"><span class="keyword">FROM</span> members </span><br><span class="line"><span class="keyword">JOIN</span> member_categories</span><br><span class="line"><span class="keyword">ON</span> members.category = member_categories.id;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="排序-orderBy"><a href="#排序-orderBy" class="headerlink" title="排序 orderBy()"></a>排序 <code>orderBy()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;orderBy(<span class="string">'category'</span>,<span class="string">'asc'</span>)-&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">category</span> <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="清空資料表內容-trucate"><a href="#清空資料表內容-trucate" class="headerlink" title="清空資料表內容 trucate()"></a>清空資料表內容 <code>trucate()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;trucate();</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> members</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="集合需要的欄位值-pluck"><a href="#集合需要的欄位值-pluck" class="headerlink" title="集合需要的欄位值 pluck()"></a>集合需要的欄位值 <code>pluck()</code></h3><p><code>pluck()</code> 將 Collection 裡取得每一個 StdClass object 的某個欄位值，之後集合起來。<br>laravel 在5.4以後用 <code>pluck()</code> 方法取代以前的 <code>lists()</code></p>
<p>※ 只有取得欄位的值放入陣列的value。<br><code>pluck(&#39;value&#39;)</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;pluck(<span class="string">'m_name'</span>);</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Illuminate\Support\Collection &#123;<span class="comment">#254 ▼</span></span><br><span class="line">  <span class="comment">#items: array:11 [▼</span></span><br><span class="line">    <span class="number">0</span> =&gt; <span class="string">"Mrs. Maymie Kulas"</span></span><br><span class="line">    <span class="number">1</span> =&gt; <span class="string">"Odie Tromp"</span></span><br><span class="line">    <span class="number">2</span> =&gt; <span class="string">"Mabelle Okuneva"</span></span><br><span class="line">    <span class="number">3</span> =&gt; <span class="string">"Lolita Lind MD"</span></span><br><span class="line">    <span class="number">4</span> =&gt; <span class="string">"Evalyn Prohaska"</span></span><br><span class="line">    <span class="number">5</span> =&gt; <span class="string">"Adriel Zulauf"</span></span><br><span class="line">    <span class="number">6</span> =&gt; <span class="string">"Joe McGlynn"</span></span><br><span class="line">    <span class="number">7</span> =&gt; <span class="string">"Kassandra Turner Jr."</span></span><br><span class="line">    <span class="number">8</span> =&gt; <span class="string">"Ms. Mollie Rice"</span></span><br><span class="line">    <span class="number">9</span> =&gt; <span class="string">"Rebekah Welch DVM"</span></span><br><span class="line">    <span class="number">10</span> =&gt; <span class="string">"郭小黑"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>※ 可自行指定需要的key鍵。但須注意的是key鍵若有遇到重複的，會以最後一筆為鍵值。</p>
<p><code>pluck(&#39;value&#39;,&#39;key&#39;)</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;pluck(<span class="string">'m_name'</span>,<span class="string">'m_account'</span>);</span><br></pre></td></tr></table></figure>

<p>結果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Illuminate\Support\Collection &#123;<span class="comment">#254 ▼</span></span><br><span class="line">  <span class="comment">#items: array:11 [▼</span></span><br><span class="line">    <span class="string">"2egcFFaMjf"</span> =&gt; <span class="string">"Mrs. Maymie Kulas"</span></span><br><span class="line">    <span class="string">"E0hoKPmRsY"</span> =&gt; <span class="string">"Odie Tromp"</span></span><br><span class="line">    <span class="string">"quE8AEWiCE"</span> =&gt; <span class="string">"Mabelle Okuneva"</span></span><br><span class="line">    <span class="string">"WPTnOjHmCa"</span> =&gt; <span class="string">"Lolita Lind MD"</span></span><br><span class="line">    <span class="string">"7TLwP4gj1P"</span> =&gt; <span class="string">"Evalyn Prohaska"</span></span><br><span class="line">    <span class="string">"4VV6QStEDh"</span> =&gt; <span class="string">"Adriel Zulauf"</span></span><br><span class="line">    <span class="string">"jjKTpQmcoP"</span> =&gt; <span class="string">"Joe McGlynn"</span></span><br><span class="line">    <span class="string">"20jsd3NgI0"</span> =&gt; <span class="string">"Kassandra Turner Jr."</span></span><br><span class="line">    <span class="string">"XzHSrOH58K"</span> =&gt; <span class="string">"Ms. Mollie Rice"</span></span><br><span class="line">    <span class="string">"gchbObOjsv"</span> =&gt; <span class="string">"Rebekah Welch DVM"</span></span><br><span class="line">    <span class="string">"Ps_0611"</span> =&gt; <span class="string">"郭小黑"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="查詢傳回不重複的資料，將重複資料做剃除-distinct"><a href="#查詢傳回不重複的資料，將重複資料做剃除-distinct" class="headerlink" title="查詢傳回不重複的資料，將重複資料做剃除 distinct()"></a>查詢傳回不重複的資料，將重複資料做剃除 <code>distinct()</code></h3><p>※ 只列出 會員編號，且剃除重複的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;select(<span class="string">'m_id'</span>)-&gt;distinct()-&gt;get();</span><br></pre></td></tr></table></figure>

<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> m_id </span><br><span class="line"><span class="keyword">from</span> members;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="將會員編號進行分組，且只能顯示-會員權限4以上的。-groupBy-、having"><a href="#將會員編號進行分組，且只能顯示-會員權限4以上的。-groupBy-、having" class="headerlink" title="將會員編號進行分組，且只能顯示 會員權限4以上的。 groupBy()、having()"></a>將會員編號進行分組，且只能顯示 會員權限4以上的。 <code>groupBy()</code>、<code>having()</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)</span><br><span class="line">            -&gt;groupBy(<span class="string">'m_id'</span>)</span><br><span class="line">            -&gt;having(<span class="string">'category'</span>, <span class="string">'&gt;'</span>, <span class="number">4</span>)</span><br><span class="line">            -&gt;get();</span><br></pre></td></tr></table></figure>


<p>原始SQL語法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> members</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> m_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">category</span>&gt;<span class="number">4</span>;</span><br></pre></td></tr></table></figure>

<p>※ 錯誤訊息<br><img src="https://i.imgur.com/jvct51j.png" alt=""></p>
<p>※ groupBy 無法正常執行時，解決方法(2選1)</p>
<p>到 <code>config &gt; database.php</code> 的檔案裡找尋 <code>mysql</code> 的陣列。</p>
<p>1、 在陣列裡的<code>strict</code> 的value值改成 <code>false</code> ，<code>groupBy</code> 就可以正常執行。</p>
<p>2、 在陣列裡增加 <code>&#39;modes&#39;</code> 的key鍵及值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'mysql'</span> =&gt; [</span><br><span class="line">    </span><br><span class="line">    ...以上省略</span><br><span class="line">    </span><br><span class="line">    <span class="string">'strict'</span> =&gt; <span class="keyword">false</span>,</span><br><span class="line">    <span class="string">'engine'</span> =&gt; <span class="keyword">null</span>,</span><br><span class="line">    <span class="string">'options'</span> =&gt; extension_loaded(<span class="string">'pdo_mysql'</span>) ? array_filter([</span><br><span class="line">        PDO::MYSQL_ATTR_SSL_CA =&gt; env(<span class="string">'MYSQL_ATTR_SSL_CA'</span>),</span><br><span class="line">    ]) : [],</span><br><span class="line">   <span class="string">'modes'</span> =&gt; [</span><br><span class="line">        <span class="comment">//'ONLY_FULL_GROUP_BY', // Disable this to allow grouping by one column</span></span><br><span class="line">        <span class="string">'STRICT_TRANS_TABLES'</span>,</span><br><span class="line">        <span class="string">'NO_ZERO_IN_DATE'</span>,</span><br><span class="line">        <span class="string">'NO_ZERO_DATE'</span>,</span><br><span class="line">        <span class="string">'ERROR_FOR_DIVISION_BY_ZERO'</span>,</span><br><span class="line">        <span class="string">'NO_AUTO_CREATE_USER'</span>,</span><br><span class="line">        <span class="string">'NO_ENGINE_SUBSTITUTION'</span></span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>參考文件<a href="https://stackoverflow.com/questions/40917189/laravel-syntax-error-or-access-violation-1055-error" target="_blank" rel="noopener">Laravel : Syntax error or access violation: 1055 Error</a></p>
<hr>
<h3 id="忽略幾筆資料skip-，取幾筆資料take-。"><a href="#忽略幾筆資料skip-，取幾筆資料take-。" class="headerlink" title="忽略幾筆資料skip()，取幾筆資料take()。"></a>忽略幾筆資料<code>skip()</code>，取幾筆資料<code>take()</code>。</h3><p>忽略7筆資料，顯示後2筆資料。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = DB::table(<span class="string">'members'</span>)-&gt;skip(<span class="number">7</span>)-&gt;take(<span class="number">2</span>)-&gt;get();</span><br></pre></td></tr></table></figure>

<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>以上是 Query Builder 的函數簡略介紹，DB操作函數的內容真的蠻多樣，其實要用一篇全部做一個介紹，其實蠻困難的，可能要真正實戰，才會了解真正的用意，下一篇會介紹 Eloquent ORM 的使用。</p>
<h6 id="標籤-w3HexSchool-PHP-Laravel"><a href="#標籤-w3HexSchool-PHP-Laravel" class="headerlink" title="標籤: w3HexSchool PHP Laravel"></a>標籤: <code>w3HexSchool</code> <code>PHP</code> <code>Laravel</code></h6></div><div class="post-copyright"><blockquote><p>原文作者: Sian</p><p>原文鏈接: <a href="https://dew31794.github.io/2020/07/26/遇見 Laravel 的午後(Part 11)/">https://dew31794.github.io/2020/07/26/遇見 Laravel 的午後(Part 11)/</a></p><p>版權聲明: 轉載請註明出處(必須保留作者署名及鏈接)</p></blockquote></div><div class="tags"><a href="/tags/w3HexSchool/">w3HexSchool</a><a href="/tags/PHP/">PHP</a><a href="/tags/Laravel/">Laravel</a><a href="/tags/Laravel-7/">Laravel 7</a></div><div class="post-share"></div><div class="post-nav"><a href="/2020/08/02/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%2012)/" class="pre">遇見 Laravel 的午後(Part 12)</a><a href="/2020/07/19/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%208%E3%80%819)%E5%BB%B6%E4%BC%B8%E7%AF%87/" class="next">遇見 Laravel 的午後(Part 8、9)延伸篇</a></div><div id="comments"><div id="container"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.4"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.4"></script><script>var gitalk = new Gitalk({
  clientID: 'edd3d64b97e77965fa56',
  clientSecret: 'c62a4e0a719dcead27ec56efcaab400f89ef6107',
  repo: 'blog-comments',
  owner: 'dew31794',
  admin: ['dew31794'],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-TW',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目錄</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#什麼是-Query-Builder？"><span class="toc-text">什麼是 Query Builder？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#建立Member的Controller"><span class="toc-text">建立Member的Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#印出或顯示資料結果-dd-、dump"><span class="toc-text">印出或顯示資料結果 dd() 、dump()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新增-insert"><span class="toc-text">新增 insert()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改-update"><span class="toc-text">修改 update()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#刪除-delete"><span class="toc-text">刪除 delete()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#顯示資料表的所有內容-GET"><span class="toc-text">顯示資料表的所有內容 GET()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#資料表篩選條件-WHERE"><span class="toc-text">資料表篩選條件 WHERE()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#※-查詢會員資料表編號-大於等於-6-且抓取第一筆first-。"><span class="toc-text">※ 查詢會員資料表編號 大於等於 6 且抓取第一筆first()。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#※-查詢-會員資料表編號-等於10，回傳-m-account欄位值-value"><span class="toc-text">※ 查詢 會員資料表編號 等於10，回傳 m_account欄位值 value()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查詢條件是否存在-exists"><span class="toc-text">查詢條件是否存在 exists()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查詢條件是否存在-相反-doesntExist"><span class="toc-text">查詢條件是否存在(相反) doesntExist()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查詢指定的欄位-select"><span class="toc-text">查詢指定的欄位 select()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#特殊情況使用-selectRaw"><span class="toc-text">特殊情況使用 selectRaw()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#計算資料筆數-COUNT"><span class="toc-text">計算資料筆數 COUNT()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查詢會員資料表編號的最大值-Max"><span class="toc-text">查詢會員資料表編號的最大值 Max( )</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#關聯資料表-JOIN"><span class="toc-text">關聯資料表 JOIN()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排序-orderBy"><span class="toc-text">排序 orderBy()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#清空資料表內容-trucate"><span class="toc-text">清空資料表內容 trucate()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#集合需要的欄位值-pluck"><span class="toc-text">集合需要的欄位值 pluck()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查詢傳回不重複的資料，將重複資料做剃除-distinct"><span class="toc-text">查詢傳回不重複的資料，將重複資料做剃除 distinct()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#將會員編號進行分組，且只能顯示-會員權限4以上的。-groupBy-、having"><span class="toc-text">將會員編號進行分組，且只能顯示 會員權限4以上的。 groupBy()、having()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#忽略幾筆資料skip-，取幾筆資料take-。"><span class="toc-text">忽略幾筆資料skip()，取幾筆資料take()。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#結論"><span class="toc-text">結論</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#標籤-w3HexSchool-PHP-Laravel"><span class="toc-text">標籤: w3HexSchool PHP Laravel</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/02/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%2012)/">遇見 Laravel 的午後(Part 12)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/26/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%2011)/">遇見 Laravel 的午後(Part 11)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/19/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%208%E3%80%819)%E5%BB%B6%E4%BC%B8%E7%AF%87/">遇見 Laravel 的午後(Part 8、9)延伸篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/12/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%206)%E5%BB%B6%E4%BC%B8%E7%AF%87/">遇見 Laravel 的午後(Part 6)延伸篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/05/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%2010)/">遇見 Laravel 的午後(Part 10)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/27/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%209)/">遇見 Laravel 的午後(Part 9)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/21/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%208)/">遇見 Laravel 的午後(Part 8)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/31/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%207)/">遇見 Laravel 的午後(Part 7)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/24/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%206)/">遇見 Laravel 的午後(Part 6)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/17/%E9%81%87%E8%A6%8B%20Laravel%20%E7%9A%84%E5%8D%88%E5%BE%8C(Part%202%E7%95%AA%E5%A4%96%E7%AF%87%20PSR)/">遇見 Laravel 的午後(Part 2番外篇 PSR)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 標籤</i></div><div class="tagcloud"><a href="/tags/w3HexSchool/" style="font-size: 15px;">w3HexSchool</a> <a href="/tags/Json/" style="font-size: 15px;">Json</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/%E5%BB%A2%E6%96%87/" style="font-size: 15px;">廢文</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/Laravel-7/" style="font-size: 15px;">Laravel 7</a> <a href="/tags/Composer/" style="font-size: 15px;">Composer</a> <a href="/tags/%E5%A5%97%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">套件管理工具</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 所有文章</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">22</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友站連結</i></div><ul></ul><a href="https://littlehorseboy.github.io/" title="小馬哥" target="_blank">小馬哥</a><ul></ul><a href="https://wadehuang1993.github.io/blog/" title="首任村長" target="_blank">首任村長</a><ul></ul><a href="https://ms314006.github.io/" title="神Ｑ超人" target="_blank">神Ｑ超人</a><ul></ul><a href="https://yeeinhole.github.io/" title="Master Yee" target="_blank">Master Yee</a><ul></ul><a href="https://fm0fm0.github.io/blog/" title="圈圈" target="_blank">圈圈</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">網站地圖</a> |  <a href="/atom.xml">訂閱本站</a> |  <a href="/about/">聯繫博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Sian.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script></body></html>